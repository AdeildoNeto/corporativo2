<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">


    <div class="row">
        <div class="col-md-3 form-group">
            <div>
                <p:outputLabel for="tipoQuestao" value="#{msg['label.tipo']}:" />
                <div>
                    <p:selectOneMenu id="tipoQuestao" value="#{questaoBean.tipoSelecionado}"
                                     disabled="#{questaoBean.edicaoQuestao()}" required="true"
                                     class="btn dropdown-toggle bg-select-menu ui-selectonemenu-width">
                        <f:selectItems value="#{questaoBean.tipoQuestoes}" itemLabel="#{questao.descricao}" itemValue="#{questao}" var="questao" />
                        <p:ajax update="@form" event="change"/>
                    </p:selectOneMenu>
                </div>
            </div>
        </div>
        <div class="col-md-4 form-group">
            <div>
                <p:outputLabel for="componenteCurricular" value="#{msg['label.componente.curricular']}:" />
                <div>
                    <p:selectOneMenu id="componenteCurricular" required="true"
                                     value="#{questaoBean.componenteSelecionado}"
                                     class="btn dropdown-toggle bg-select-menu ui-selectonemenu-width"
                                     filter="true" filterMatchMode="startsWith">
                        <f:selectItems value="#{questaoBean.todosComponentesCurricular}"
                                       itemLabel="#{componente.nome}" itemValue="#{componente.id}" var="componente" />
                        <p:ajax update="@form" event="change" />
                    </p:selectOneMenu>
                    <p:commandLink id="addComponente" value="add" class="btn material-icons bg-default btn-add-componente"
                                   action="#{questaoBean.carregarModalComponente()}" update="formComponente:modalComponente"
                                   immediate="true" process="@this" title="#{msg['adicionar.componente.curricular']}">
                    </p:commandLink>
                </div>
            </div>
        </div>
        <div class="col-md-3 form-group" id="cargaImagem">
            <div>
                <h:outputLabel for="arquivo" value="Imagem: " />
                <div>
                    <p:fileUpload id="arquivo" label="Buscar..." mode="advanced" fileLimit="1" fileLimitMessage="selecione uma única imagem"
                                  allowTypes="/(\.|\/)(png|jpg|jpeg)$/" invalidFileMessage="apenas arquivos png, jpg ou jpeg"
                                  sizeLimit="3145728" invalidSizeMessage="É permitida imagem de no máximo 3 MB"
                                  fileUploadListener="#{questaoBean.upload}" update="@(#form)" auto="true"/>
                </div>
            </div>
        </div>
        <div class="col-md-1 form-group">
            <ui:fragment rendered="#{questaoBean.arquivo != null}" class="img">
                <div id="exibirImg" style='position:relative; top:0px; left:0px;'>
                    <div id="btnCancelarImg" style='position:relative; top:35px; left:5px;'>
                        <p:commandLink
                            action="#{questaoBean.limparImagem()}" immediate="true"  
                            update="@(#form)">
                            <h:graphicImage name="img/Delete-icon2.png" width="35px" height="35px" />
                        </p:commandLink>
                    </div>
                    <p:graphicImage value="#{questaoBean.image}" width="90px" height="90px">
                    </p:graphicImage>                
                </div>
            </ui:fragment>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12 form-group">
            <p:outputLabel for="questao-enunciado" value="#{msg['label.enunciado']}:" />
            <h:inputTextarea required="true" class="form-control" id="questao-enunciado" rows="4" value="#{questaoBean.questao.enunciado}">
            </h:inputTextarea>
        </div>
    </div>
    <div>
        <p:outputPanel id="panelAlt" rendered="#{questaoBean.tipoSelecionado == 'MULTIPLA_ESCOLHA'}"
                       styleClass="col-md-6 form-group">
            <p:selectOneRadio id="radio" value="#{questaoBean.opcaoCorreta}" layout="custom" plain="true" >
                <f:selectItem itemValue="0" />
                <f:selectItem itemValue="1" />
                <f:selectItem itemValue="2" />
                <f:selectItem itemValue="3" />
                <f:selectItem itemValue="4" />
            </p:selectOneRadio>

            <ui:repeat value="#{questaoBean.alternativas}" var="alternativa" varStatus="index">
                <h:panelGrid columns="2" width="100%" class="table-alternativa">
                    <p:radioButton for="form:radio" itemIndex="#{index.index}" />
                    <h:inputText value="#{alternativa.descricao}" required="true" class="form-control" />
                </h:panelGrid>
            </ui:repeat>
        </p:outputPanel>
    </div>

    <p:outputPanel styleClass="row" rendered="#{questaoBean.tipoSelecionado == 'VERDADEIRO_FALSO'}">
        <div class="col-md-4 display-flex">
            <p:outputLabel for="resposta-vf" value="#{msg['label.resposta']}:" />
            <p:inputSwitch id="resposta-vf" styleClass="switch" value="#{questaoBean.respostaVF}"
                           offLabel="#{msg['btn.falso']}" onLabel="#{msg['btn.verdadeiro']}" required="true" />
        </div>
    </p:outputPanel>

    <div class="row">
        <div class="col-md-4 display-flex">
            <p:outputLabel for="questao-compartilhada" value="#{msg['label.compartilhar.questao']}:" />
            <p:inputSwitch id="questao-compartilhada" styleClass="switch" value="#{questaoBean.questao.compartilhada}"
                           offLabel="#{msg['btn.nao']}" onLabel="#{msg['btn.sim']}" required="true" />
        </div>        
    </div>
    <div class="row">

    </div>
</ui:composition>
